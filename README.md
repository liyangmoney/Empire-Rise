# ğŸ° å¸å›½å´›èµ·ï¼šè›®è’äº‰éœ¸

> å‰åç«¯åˆ†ç¦»çš„ SLG æ¸¸æˆ - Node.js + Socket.io + H5å®¢æˆ·ç«¯
> 
> ğŸ³ **æ”¯æŒ Docker ä¸€é”®éƒ¨ç½²**

## âœ¨ å·²å®ç°åŠŸèƒ½

### âœ… èµ„æºç³»ç»Ÿ
- 6ç§èµ„æºï¼šæœ¨æ/çŸ³æ/ç²®é£Ÿ/é“çŸ¿/æ°´æ™¶/é‡‘å¸
- ä»“åº“å®¹é‡ä¸å‡çº§
- è‡ªåŠ¨äº§å‡º + æ‰‹åŠ¨é‡‡é›†
- å®æ—¶åŒæ­¥

### âœ… å»ºç­‘ç³»ç»Ÿ
- ä¼æœ¨åœºã€å†œåœºã€å…µè¥ç­‰åŸºç¡€å»ºç­‘
- å»ºç­‘ç­‰çº§å½±å“äº§å‡º/å®¹é‡
- å‡çº§æ¶ˆè€—èµ„æº

### âœ… å†›é˜Ÿç³»ç»Ÿ
- 3ç§åŸºç¡€å…µç§ï¼šæ­¥å…µ/å¼“å…µ/éª‘å…µ
- **å…µç§å…‹åˆ¶å…³ç³»**ï¼šæ­¥å…µâ†’éª‘å…µâ†’å¼“å…µâ†’æ­¥å…µ
- è®­ç»ƒæ¶ˆè€—ç²®é£Ÿ/æœ¨æ
- å†›é˜Ÿä¸Šé™ï¼ˆç”±å»ºç­‘ç­‰çº§å†³å®šï¼‰
- å£«æ°”ç³»ç»Ÿï¼ˆå½±å“æˆ˜æ–—åŠ› Â±20%ï¼‰
- è®­ç»ƒé˜Ÿåˆ—ï¼ˆå¼‚æ­¥å®Œæˆï¼‰
- ç²®é£Ÿæ¶ˆè€—ä¸å£«æ°”æƒ©ç½š

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èï¼šDockerï¼‰

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæœ€ç®€å•ï¼Œä¸€é”®å¯åŠ¨ï¼‰

```bash
# 1. å…‹éš†ä»£ç 
git clone https://github.com/liyangmoney/Empire-Rise.git
cd Empire-Rise

# 2. ä¸€é”®å¯åŠ¨ï¼ˆæ„å»º+è¿è¡Œï¼‰
docker-compose up --build

# 3. æ‰“å¼€æµè§ˆå™¨è®¿é—®
# http://localhost:3000
```

åœæ­¢æœåŠ¡ï¼š
```bash
docker-compose down
```

### æ–¹å¼äºŒï¼šDocker æ‰‹åŠ¨æ„å»º

```bash
# æ„å»ºé•œåƒ
docker build -t empire-rise .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 --name empire-rise-server empire-rise

# æŸ¥çœ‹æ—¥å¿—
docker logs -f empire-rise-server
```

### æ–¹å¼ä¸‰ï¼šæœ¬åœ° Node.js è¿è¡Œ

```bash
cd server
npm install
npm start
```

---

## ğŸ® æ¸¸æˆæŒ‡å—

### åˆå§‹çŠ¶æ€
- åŸºç¡€ä»“åº“ Lv1
- 500æœ¨æã€300ç²®é£Ÿã€100é‡‘å¸
- å†›é˜Ÿä¸Šé™ 50

### å…µç§å…‹åˆ¶
| å…µç§ | å…‹åˆ¶ | è¢«å…‹åˆ¶ | è®­ç»ƒæ¶ˆè€— |
|------|------|--------|----------|
| æ­¥å…µ | éª‘å…µ | å¼“å…µ | ç²®é£ŸÃ—20 |
| å¼“å…µ | æ­¥å…µ | éª‘å…µ | ç²®é£ŸÃ—25+æœ¨æÃ—10 |
| éª‘å…µ | å¼“å…µ | æ­¥å…µ | ç²®é£ŸÃ—40+æœ¨æÃ—20 |

### å†›é˜Ÿä¸Šé™æå‡
- å¸å›½å®«æ®¿ï¼šæ¯çº§ +20
- å…µè¥ï¼šæ¯çº§ +30
- æ°‘å±…ï¼šæ¯çº§ +10

---

## ğŸ”Œ API æ–‡æ¡£

### Socket.io äº‹ä»¶

#### èµ„æº/å»ºç­‘
| äº‹ä»¶ | æ–¹å‘ | å‚æ•° | è¯´æ˜ |
|------|------|------|------|
| `resource:collect` | Câ†’S | `{playerId, resourceType, amount}` | æ‰‹åŠ¨é‡‡é›†èµ„æº |
| `building:upgrade` | Câ†’S | `{playerId, buildingTypeId, cost}` | å‡çº§å»ºç­‘ |

#### å†›é˜Ÿç³»ç»Ÿ
| äº‹ä»¶ | æ–¹å‘ | å‚æ•° | è¯´æ˜ |
|------|------|------|------|
| `army:train` | Câ†’S | `{playerId, unitTypeId, count}` | è®­ç»ƒå£«å…µ |
| `army:trainingPreview` | Câ†’S | `{playerId, unitTypeId, count}` | è®­ç»ƒé¢„è§ˆ |
| `army:getStatus` | Câ†’S | `{playerId}` | è·å–å†›é˜ŸçŠ¶æ€ |
| `army:trainingCompleted` | Sâ†’C | `{task, army}` | è®­ç»ƒå®Œæˆé€šçŸ¥ |
| `army:update` | Sâ†’C | `{...}` | å†›é˜ŸçŠ¶æ€æ›´æ–° |

---

## ğŸ“ é¡¹ç›®ç»“æ„
```
Empire-Rise/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/    # ECSç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResourceComponent.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BuildingComponent.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ArmyComponent.js
â”‚   â”‚   â”‚   â””â”€â”€ systems/       # æ¸¸æˆç³»ç»Ÿ
â”‚   â”‚   â”‚       â”œâ”€â”€ GameLoop.js
â”‚   â”‚   â”‚       â””â”€â”€ TrainingSystem.js
â”‚   â”‚   â””â”€â”€ network/socket/handlers.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ client/                    # H5å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ src/main.js
â”œâ”€â”€ shared/                    # å‰åç«¯å…±äº«
â”‚   â”œâ”€â”€ constants.js
â”‚   â””â”€â”€ unitTypes.js
â”œâ”€â”€ Dockerfile                 # Dockeré…ç½®
â”œâ”€â”€ docker-compose.yml         # ä¸€é”®ç¼–æ’
â””â”€â”€ README.md
```

---

## â­ï¸ å¼€å‘è®¡åˆ’

| ä¼˜å…ˆçº§ | æ¨¡å— | çŠ¶æ€ |
|--------|------|------|
| P0 | æˆ˜æ–—ç³»ç»Ÿ | ğŸš§ å¾…å¼€å‘ |
| P1 | NPCç³»ç»Ÿ | ğŸš§ å¾…å¼€å‘ |
| P2 | å°†é¢†ç³»ç»Ÿ | ğŸš§ å¾…å¼€å‘ |
| P3 | ç§‘æŠ€ç³»ç»Ÿ | ğŸš§ å¾…å¼€å‘ |

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.2.0 (2024-02-12)
- âœ… æ–°å¢å†›é˜Ÿç³»ç»Ÿ
- âœ… å…µç§å…‹åˆ¶å…³ç³»
- âœ… å£«æ°”ä¸ç²®é£Ÿæ¶ˆè€—
- âœ… è®­ç»ƒé˜Ÿåˆ—
- âœ… Docker æ”¯æŒ

### v0.1.0
- âœ… èµ„æºç³»ç»Ÿ MVP
- âœ… å»ºç­‘ç³»ç»Ÿ MVP

---

## ğŸ³ Docker å‘½ä»¤é€ŸæŸ¥

```bash
# å¯åŠ¨
docker-compose up -d

# åœæ­¢
docker-compose down

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯
docker-compose restart

# é‡å»ºï¼ˆä»£ç æ›´æ–°åï¼‰
docker-compose up --build -d
```