# 《帝国崛起：蛮荒争霸》测试用例文档

## 文档信息
- **版本**: v1.0
- **日期**: 2024-02-12

---

## 1. 测试概述

### 1.1 测试范围
- 功能测试: 资源/建筑/军队/战斗/任务/将领/时间系统
- 接口测试: Socket.io 事件通信
- 性能测试: 并发与响应时间
- 兼容性测试: 多浏览器支持

### 1.2 测试环境
- 后端: Node.js 20 + Docker
- 前端: Chrome/Firefox/Safari
- 网络: 正常网络 + 弱网模拟

---

## 2. 测试用例

### 2.1 资源系统测试

#### TC-001: 资源采集
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-001 |
| **用例名称** | 资源采集功能测试 |
| **前置条件** | 玩家已连接服务器，进入游戏 |
| **测试步骤** | 1. 点击"采集木材+100"按钮<br>2. 观察资源变化<br>3. 重复点击其他资源按钮 |
| **预期结果** | 1. 木材数量增加100<br>2. 全局资源栏实时更新<br>3. 其他资源同样增加 |
| **优先级** | P0 |

#### TC-002: 资源上限
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-002 |
| **用例名称** | 资源上限限制测试 |
| **前置条件** | 资源接近仓库上限 |
| **测试步骤** | 1. 持续采集资源至满<br>2. 观察超出部分 |
| **预期结果** | 超出部分无法添加，提示仓库已满 |
| **优先级** | P1 |

#### TC-003: 资源产出（时间加速）
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-003 |
| **用例名称** | 时间加速影响资源产出 |
| **前置条件** | 建有伐木场/农场 |
| **测试步骤** | 1. 记录当前资源<br>2. 设置时间加速60x<br>3. 等待10秒<br>4. 观察资源变化 |
| **预期结果** | 资源增加量为正常速度的60倍 |
| **优先级** | P0 |

---

### 2.2 建筑系统测试

#### TC-004: 建筑升级
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-004 |
| **用例名称** | 建筑升级功能测试 |
| **前置条件** | 拥有足够资源 |
| **测试步骤** | 1. 点击"升级基础仓库"<br>2. 确认资源消耗弹窗<br>3. 点击确定 |
| **预期结果** | 1. 显示消耗确认弹窗<br>2. 扣除对应资源<br>3. 仓库等级+1<br>4. 容量提升 |
| **优先级** | P0 |

#### TC-005: 资源不足升级
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-005 |
| **用例名称** | 资源不足时升级建筑 |
| **前置条件** | 资源不足以升级 |
| **测试步骤** | 1. 点击升级按钮 |
| **预期结果** | 提示"资源不足"错误弹窗 |
| **优先级** | P1 |

---

### 2.3 军队系统测试

#### TC-006: 训练士兵
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-006 |
| **用例名称** | 训练士兵功能测试 |
| **前置条件** | 拥有足够粮食 |
| **测试步骤** | 1. 选择兵种"步兵"<br>2. 输入数量10<br>3. 点击"开始训练"<br>4. 确认消耗弹窗 |
| **预期结果** | 1. 扣除粮食200<br>2. 训练队列显示任务<br>3. 训练完成后士兵数+10 |
| **优先级** | P0 |

#### TC-007: 训练队列时间加速
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-007 |
| **用例名称** | 时间加速影响训练 |
| **前置条件** | 开始训练士兵 |
| **测试步骤** | 1. 开始训练10名步兵（正常需100秒）<br>2. 设置时间加速60x<br>3. 观察训练完成时间 |
| **预期结果** | 约1.6秒后训练完成 |
| **优先级** | P0 |

#### TC-008: 军队上限
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-008 |
| **用例名称** | 军队上限限制 |
| **前置条件** | 军队接近上限 |
| **测试步骤** | 1. 尝试训练超过上限的士兵 |
| **预期结果** | 提示"超过军队上限"错误 |
| **优先级** | P1 |

---

### 2.4 战斗系统测试

#### TC-009: 正常战斗（胜利）
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-009 |
| **用例名称** | 正常战斗流程测试 |
| **前置条件** | 拥有士兵，选择推荐NPC |
| **测试步骤** | 1. 切换到战斗标签<br>2. 选择"野狼"（推荐）<br>3. 点击"发起攻击"<br>4. 确认战斗 |
| **预期结果** | 1. 战斗正常进行<br>2. 显示战斗结果<br>3. 获得资源奖励<br>4. 可再次发起攻击 |
| **优先级** | P0 |

#### TC-010: 空军队战斗
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-010 |
| **用例名称** | 无士兵时发起战斗 |
| **前置条件** | 没有士兵 |
| **测试步骤** | 1. 点击攻击按钮 |
| **预期结果** | 提示"编队中没有士兵"错误 |
| **优先级** | P0 |

#### TC-011: 连续战斗
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-011 |
| **用例名称** | 战斗结束后立即再次战斗 |
| **前置条件** | 完成一场战斗 |
| **测试步骤** | 1. 等待第一场战斗结束<br>2. 立即发起第二场战斗 |
| **预期结果** | 可以正常发起新战斗，无"正在进行另一场战斗"错误 |
| **优先级** | P0 |

#### TC-012: 高风险战斗
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-012 |
| **用例名称** | 攻击高风险NPC |
| **前置条件** | 选择非推荐NPC |
| **测试步骤** | 1. 选择战力远高于自己的NPC<br>2. 点击"强行攻击" |
| **预期结果** | 1. 显示高风险警告<br>2. 确认后可攻击<br>3. 大概率失败 |
| **优先级** | P1 |

---

### 2.5 任务系统测试

#### TC-013: 任务进度自动更新
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-013 |
| **用例名称** | 任务进度自动追踪 |
| **前置条件** | 有进行中的任务 |
| **测试步骤** | 1. 采集资源/训练士兵/战斗<br>2. 查看任务面板 |
| **预期结果** | 任务进度自动更新显示 |
| **优先级** | P0 |

#### TC-014: 领取任务奖励
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-014 |
| **用例名称** | 领取任务奖励 |
| **前置条件** | 任务已完成 |
| **测试步骤** | 1. 点击"领取奖励"按钮 |
| **预期结果** | 1. 获得奖励资源<br>2. 任务状态变为已领取<br>3. 主线任务解锁下一个 |
| **优先级** | P0 |

#### TC-015: 日常任务刷新
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-015 |
| **用例名称** | 日常任务每日刷新 |
| **前置条件** | 新的一天（游戏内） |
| **测试步骤** | 1. 等待游戏内新的一天<br>2. 查看日常任务面板 |
| **预期结果** | 日常任务列表刷新为新的3个任务 |
| **优先级** | P1 |

---

### 2.6 将领系统测试

#### TC-016: 招募将领
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-016 |
| **用例名称** | 招募将领功能 |
| **前置条件** | 拥有足够金币 |
| **测试步骤** | 1. 切换到将领标签<br>2. 点击"普通招募"<br>3. 确认消耗 |
| **预期结果** | 1. 扣除100金币<br>2. 获得随机品质将领<br>3. 显示招募结果弹窗 |
| **优先级** | P0 |

#### TC-017: 将领分配编队
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-017 |
| **用例名称** | 将领分配至编队 |
| **前置条件** | 拥有将领 |
| **测试步骤** | 1. 在将领卡片上点击"分配至默认编队" |
| **预期结果** | 将领分配到编队，战斗时生效 |
| **优先级** | P1 |

#### TC-018: 将领参战
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-018 |
| **用例名称** | 将领参与战斗 |
| **前置条件** | 将领已分配编队 |
| **测试步骤** | 1. 选择携带将领<br>2. 发起战斗 |
| **预期结果** | 1. 战斗中触发将领技能<br>2. 将领获得经验 |
| **优先级** | P1 |

---

### 2.7 时间系统测试

#### TC-019: 时间显示
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-019 |
| **用例名称** | 游戏时间实时显示 |
| **前置条件** | 正常游戏 |
| **测试步骤** | 1. 观察顶部时间显示 |
| **预期结果** | 时间每秒更新，格式"第X年 Y月 Z日 ☀️ 早晨" |
| **优先级** | P0 |

#### TC-020: 切换时间速度
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-020 |
| **用例名称** | 切换时间加速倍率 |
| **前置条件** | 正常游戏 |
| **测试步骤** | 1. 调用 setTimeSpeed(60)<br>2. 观察时间变化速度 |
| **预期结果** | 时间流逝速度加快60倍 |
| **优先级** | P1 |

#### TC-021: 每日刷新
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-021 |
| **用例名称** | 新的一天触发刷新 |
| **前置条件** | 加速时间至跨天 |
| **测试步骤** | 1. 快进时间24小时<br>2. 观察日常任务 |
| **预期结果** | 日常任务自动刷新 |
| **优先级** | P1 |

---

### 2.8 接口测试

#### TC-022: Socket连接
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-022 |
| **用例名称** | Socket.io连接稳定性 |
| **前置条件** | 网络正常 |
| **测试步骤** | 1. 连接服务器<br>2. 观察连接状态指示器 |
| **预期结果** | 显示绿点"在线" |
| **优先级** | P0 |

#### TC-023: 断线重连
| 项目 | 内容 |
|------|------|
| **用例ID** | TC-023 |
| **用例名称** | 断线后重连 |
| **前置条件** | 已连接 |
| **测试步骤** | 1. 断开网络<br>2. 恢复网络<br>3. 观察重连 |
| **预期结果** | 1. 显示红点"离线"<br>2. 自动重连<br>3. 恢复绿点"在线" |
| **优先级** | P1 |

---

## 3. 测试执行计划

### 3.1 测试阶段
| 阶段 | 时间 | 内容 |
|------|------|------|
| 冒烟测试 | 2小时 | P0用例执行 |
| 功能测试 | 2天 | 全部用例执行 |
| 回归测试 | 4小时 | Bug修复后验证 |

### 3.2 通过标准
- P0用例100%通过
- P1用例80%以上通过
- 无阻塞性Bug

---

## 4. 缺陷记录模板

| 字段 | 说明 |
|------|------|
| Bug ID | BUG-001 |
| 标题 | 简明描述 |
| 重现步骤 | 详细步骤 |
| 预期结果 | 应该发生什么 |
| 实际结果 | 实际发生什么 |
| 严重程度 | 致命/严重/一般/轻微 |
| 优先级 | P0/P1/P2 |
| 截图 | 如有 |
